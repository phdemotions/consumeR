<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Clean and Prepare Survey Data with Publication-Ready Exclusion Reporting — clean_survey_data • consumeR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Clean and Prepare Survey Data with Publication-Ready Exclusion Reporting — clean_survey_data"><meta name="description" content="**This is STEP 1 in your research workflow.** Cleans survey data by systematically
excluding cases and creates publication-ready participant flow documentation.
**What this function does:**
- Removes pre-test/pilot data (if applicable)
- Excludes participants who don't meet your inclusion criteria
- Removes participants who failed attention checks
- Tracks every exclusion with detailed reasons
- Generates publication text for your Methods section"><meta property="og:description" content="**This is STEP 1 in your research workflow.** Cleans survey data by systematically
excluding cases and creates publication-ready participant flow documentation.
**What this function does:**
- Removes pre-test/pilot data (if applicable)
- Excludes participants who don't meet your inclusion criteria
- Removes participants who failed attention checks
- Tracks every exclusion with detailed reasons
- Generates publication text for your Methods section"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">consumeR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/getting-started.html">Get Started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-guides" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Guides</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-guides"><li><h6 class="dropdown-header" data-toc-skip>────── Getting Started ──────</h6></li>
    <li><a class="dropdown-item" href="../articles/START_HERE.html">Start Here</a></li>
    <li><a class="dropdown-item" href="../articles/QUICKSTART.html">Quick Start</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>────── Package Info ──────</h6></li>
    <li><a class="dropdown-item" href="../articles/PACKAGE_OVERVIEW.html">Package Overview</a></li>
    <li><a class="dropdown-item" href="../articles/DEVELOPMENT.html">Development Guide</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>────── Examples ──────</h6></li>
    <li><a class="dropdown-item" href="../articles/EXAMPLES_GUIDE.html">Examples Guide</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/phdemotions/consumeR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Clean and Prepare Survey Data with Publication-Ready Exclusion Reporting</h1>
      <small class="dont-index">Source: <a href="https://github.com/phdemotions/consumeR/blob/HEAD/R/data_cleaning.R" class="external-link"><code>R/data_cleaning.R</code></a></small>
      <div class="d-none name"><code>clean_survey_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>**This is STEP 1 in your research workflow.** Cleans survey data by systematically
excluding cases and creates publication-ready participant flow documentation.</p>
<p>**What this function does:**
- Removes pre-test/pilot data (if applicable)
- Excludes participants who don't meet your inclusion criteria
- Removes participants who failed attention checks
- Tracks every exclusion with detailed reasons
- Generates publication text for your Methods section</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">clean_survey_data</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  pretest_var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pretest_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="fl">1</span>, <span class="st">"pretest"</span>, <span class="st">"pre-test"</span>, <span class="st">"test"</span><span class="op">)</span>,</span>
<span>  date_var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pretest_before_date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  inclusion_criteria <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  attention_checks <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  attention_check_rule <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  additional_exclusions <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  additional_exclusion_reason <span class="op">=</span> <span class="st">"Additional exclusions"</span>,</span>
<span>  rename_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  recode_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id_var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Data frame with your raw survey data (usually from Qualtrics, MTurk, etc.)</p></dd>


<dt id="arg-pretest-var">pretest_var<a class="anchor" aria-label="anchor" href="#arg-pretest-var"></a></dt>
<dd><p>**Column name** that marks pre-test cases (or NULL if no pre-tests).</p>
<p>**What this is:** The name of the column in your data that identifies pre-test responses.
  Pre-tests are responses you collected BEFORE your main study (pilot testing, your own
  test responses, etc.). These shouldn't be counted in your sample size.</p>
<p>**Real examples:**
  - Qualtrics often creates: `"Status"` (values: "Survey Preview" = pre-test)
  - Or you might have: `"is_pilot"`, `"test_response"`, `"preview"`
  - MTurk: You might mark your own tests with a specific worker ID</p>
<p>**How to find it:**
  Look at your column names: `names(raw_data)` or `colnames(raw_data)`</p>
<p>**If you don't have pre-tests:** Just use `pretest_var = NULL` (the default)</p></dd>


<dt id="arg-pretest-values">pretest_values<a class="anchor" aria-label="anchor" href="#arg-pretest-values"></a></dt>
<dd><p>**Values** in the pretest_var column that indicate it's a pre-test.</p>
<p>**What this is:** What values in that column mean "this is a pre-test"?</p>
<p>**Real examples:**
  - If using Qualtrics Status: `pretest_values = "Survey Preview"`
  - If you have a TRUE/FALSE column: `pretest_values = c(TRUE, 1, "yes")`
  - If you marked tests with special ID: `pretest_values = "RESEARCHER_TEST"`</p>
<p>**Default:** c(TRUE, 1, "pretest", "pre-test", "test") - catches common cases</p></dd>


<dt id="arg-date-var">date_var<a class="anchor" aria-label="anchor" href="#arg-date-var"></a></dt>
<dd><p>**Column name** containing response dates/timestamps (or NULL).</p>
<p>**What this is:** The column that shows when each response was collected.
  Use this if you want to exclude responses collected before a certain date.</p>
<p>**Real examples:**
  - Qualtrics: `"StartDate"`, `"EndDate"`, or `"RecordedDate"`
  - MTurk: `"SubmitTime"` or `"AcceptTime"`
  - Your own: Whatever timestamp column you have</p>
<p>**How to find it:**
  Look for date/time columns: `names(raw_data)` - often contains "Date" or "Time"</p>
<p>**Note:** Works with most date formats (automatically converted)</p></dd>


<dt id="arg-pretest-before-date">pretest_before_date<a class="anchor" aria-label="anchor" href="#arg-pretest-before-date"></a></dt>
<dd><p>**Cutoff date** - exclude responses collected before this date (or NULL).</p>
<p>**What this is:** Any responses collected BEFORE this date will be treated as pre-tests.
  Useful when you did pilot testing before your main data collection.</p>
<p>**Real examples:**
  “`r
  # If you started real data collection on March 15, 2024:
  pretest_before_date = "2024-03-15"</p>
<p># Or use a Date object:
  pretest_before_date = as.Date("2024-03-15")</p>
<p># With specific time (if you have timestamps):
  pretest_before_date = as.POSIXct("2024-03-15 09:00:00")
  “`</p>
<p>**Date formats accepted:**
  - "YYYY-MM-DD" (recommended): `"2024-03-15"`
  - Date objects: `as.Date("2024-03-15")`
  - POSIXct timestamps: `as.POSIXct("2024-03-15 09:00:00")`</p>
<p>**How to use with `date_var`:**
  Both must be provided together. The function will exclude any rows where
  `date_var &lt; pretest_before_date`</p>
<p>**Can combine with `pretest_var`:** If you provide both date-based and column-based
  pre-test criteria, responses matching EITHER will be removed</p></dd>


<dt id="arg-inclusion-criteria">inclusion_criteria<a class="anchor" aria-label="anchor" href="#arg-inclusion-criteria"></a></dt>
<dd><p>**Named list** of requirements participants must meet.</p>
<p>**What this is:** Rules that determine if someone should be INCLUDED in your analysis.
  Create a list where each element is a TRUE/FALSE check.</p>
<p>**Structure:** `list(criterion_name = TRUE/FALSE for each row)`</p>
<p>**Real examples:**</p>
<p>“`r
  # Example 1: Basic Qualtrics survey
  inclusion_criteria = list(
    completed = raw_data$Finished == 1,              # Qualtrics completion flag
    adult = raw_data$age &gt;= 18,                      # Age requirement
    consented = raw_data$consent == "I agree"        # Gave consent
  )</p>
<p># Example 2: MTurk study
  inclusion_criteria = list(
    completed = raw_data$status == "Submitted",
    approval_rate = raw_data$approval &gt;= 95,         # MTurk 95<!-- %+ approval -->
    min_hits = raw_data$total_hits &gt;= 100,           # At least 100 HITs
    us_only = raw_data$location == "US"
  )</p>
<p># Example 3: Just want people who finished
  inclusion_criteria = list(
    completed = raw_data$Finished == 1
  )
  “`</p>
<p>**How to figure out column names:**
  - Run: `names(raw_data)` to see all columns
  - Look for: "Finished", "Status", "Progress", etc.
  - Check what values mean completion: `table(raw_data$Finished)`</p></dd>


<dt id="arg-attention-checks">attention_checks<a class="anchor" aria-label="anchor" href="#arg-attention-checks"></a></dt>
<dd><p>**Named list** of attention check questions and correct answers.</p>
<p>**What this is:** Questions where you told participants "Select [specific answer]".
  These catch people who aren't paying attention.</p>
<p>**Structure:** Each attention check needs:
  - `var`: The column name for that question
  - `correct`: The correct answer</p>
<p>**Real examples:**</p>
<p>“`r
  # Example 1: Likert scale attention checks (1-7 scale)
  attention_checks = list(
    ac1 = list(var = "Q5_1", correct = 7),           # "Select Strongly Agree (7)"
    ac2 = list(var = "Q12_1", correct = 1)           # "Select Strongly Disagree (1)"
  )</p>
<p># Example 2: Text-based attention checks
  attention_checks = list(
    ac1 = list(var = "attention_1", correct = "blue"),       # "Select 'blue'"
    ac2 = list(var = "attention_2", correct = "strongly agree")  # Exact text match
  )</p>
<p># Example 3: Multiple choice (numeric coding)
  attention_checks = list(
    ac1 = list(var = "AC_Q3", correct = 4)           # Option 4 was correct
  )
  “`</p>
<p>**How to find column names:**
  - In Qualtrics: Questions are often "Q1", "Q2", "Q3", etc.
  - Look at: `names(raw_data)` to find your attention check columns
  - Check what values people selected: `table(raw_data$Q5_1)`</p>
<p>**What's the correct answer?**
  - Look at your survey - what did you tell people to select?
  - Check your data: `unique(raw_data$Q5_1)` to see possible values</p></dd>


<dt id="arg-attention-check-rule">attention_check_rule<a class="anchor" aria-label="anchor" href="#arg-attention-check-rule"></a></dt>
<dd><p>**How many** attention checks must someone pass?</p>
<p>**Options:**
  - `"all"` (default and recommended): Must pass EVERY attention check
  - `"majority"`: Must pass more than half (e.g., 2 out of 3)
  - A number: Must pass at least this many (e.g., `2` means pass at least 2)</p>
<p>**Examples:**
  - If you have 3 attention checks and want to be strict: `"all"`
  - If you want to be lenient (allow 1 failure): `2` (must pass 2 out of 3)
  - If you have many checks and want majority: `"majority"`</p>
<p>**Recommendation:** Use `"all"` - it's most common in publications</p></dd>


<dt id="arg-additional-exclusions">additional_exclusions<a class="anchor" aria-label="anchor" href="#arg-additional-exclusions"></a></dt>
<dd><p>**TRUE/FALSE vector** for any other exclusions.</p>
<p>**What this is:** Any other reason to exclude someone (duplicates, bots, etc.)</p>
<p>**Real examples:**</p>
<p>“`r
  # Exclude duplicate IP addresses
  additional_exclusions = duplicated(raw_data$IPAddress)</p>
<p># Exclude people who finished too fast (&lt; 2 minutes)
  additional_exclusions = raw_data$Duration_seconds &lt; 120</p>
<p># Exclude based on multiple criteria
  additional_exclusions = duplicated(raw_data$IPAddress) |
                         raw_data$Duration_seconds &lt; 120
  “`</p></dd>


<dt id="arg-additional-exclusion-reason">additional_exclusion_reason<a class="anchor" aria-label="anchor" href="#arg-additional-exclusion-reason"></a></dt>
<dd><p>**Text description** of those exclusions.</p>
<p>**Examples:**
  - `"Duplicate IP addresses"`
  - `"Completed survey too quickly (&lt; 2 minutes)"`
  - `"Failed quality checks"`</p></dd>


<dt id="arg-rename-vars">rename_vars<a class="anchor" aria-label="anchor" href="#arg-rename-vars"></a></dt>
<dd><p>**Named list** for renaming variables (or NULL).</p>
<p>**What this is:** Renames columns from Qualtrics' random names to meaningful names.</p>
<p>**Real examples:**
  “`r
  # Qualtrics often names questions Q1, Q2, Q3...
  # Give them meaningful names:
  rename_vars = list(
    brand_attitude = "Q1",           # Rename Q1 to brand_attitude
    purchase_intent = "Q2",          # Rename Q2 to purchase_intent
    age = "Q17",                     # Rename Q17 to age
    condition = "FL_16_DO"           # Rename Qualtrics flow to condition
  )
  “`</p>
<p>**Structure:** `list(new_name = "old_name")`
  - Left side = what you WANT to call it
  - Right side = what Qualtrics CURRENTLY calls it</p>
<p>**How to find old names:** Run `names(raw_data)` to see current column names</p></dd>


<dt id="arg-recode-vars">recode_vars<a class="anchor" aria-label="anchor" href="#arg-recode-vars"></a></dt>
<dd><p>**Named list** for recoding variable values (or NULL).</p>
<p>**What this is:** Changes coded values to meaningful labels.
  Useful for converting numeric codes to text labels or fixing typos.</p>
<p>**Real examples:**
  “`r
  # Example 1: Recode numeric condition codes to text labels
  recode_vars = list(
    condition = c("1" = "control", "2" = "treatment_A", "3" = "treatment_B")
  )</p>
<p># Example 2: Fix inconsistent text responses
  recode_vars = list(
    gender = c("m" = "Male", "M" = "Male", "male" = "Male",
               "f" = "Female", "F" = "Female", "female" = "Female")
  )</p>
<p># Example 3: Recode multiple variables
  recode_vars = list(
    condition = c("1" = "control", "2" = "treatment"),
    consent = c("1" = "yes", "2" = "no"),
    likert_scale = c("1" = "Strongly Disagree", "2" = "Disagree",
                     "3" = "Neutral", "4" = "Agree", "5" = "Strongly Agree")
  )
  “`</p>
<p>**Structure:** `list(var_name = c("old" = "new", "old2" = "new2"))`</p>
<p>**Note:** Use the NEW names if you're also using `rename_vars`</p></dd>


<dt id="arg-id-var">id_var<a class="anchor" aria-label="anchor" href="#arg-id-var"></a></dt>
<dd><p>**Column name** with participant IDs (for tracking).</p>
<p>**Common names:**
  - Qualtrics: `"ResponseId"` or `"ResponseID"`
  - MTurk: `"WorkerId"` or `"worker_id"`
  - Prolific: `"PROLIFIC_PID"`
  - Your own: Whatever you named it</p>
<p>**To find it:** Run `names(raw_data)` and look for ID column</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Show detailed progress messages? (TRUE = yes, see what's happening)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with:
  - `clean_data`: Your cleaned dataset (use this for analysis!)
  - `n_initial`: Initial sample size (AFTER removing pre-tests)
  - `n_final`: Final sample size
  - `exclusion_summary`: Table of exclusions (for your manuscript)
  - `publication_text`: Copy-paste into your Methods section
  - `flags`: Which participants were excluded for which reasons
  - `renamed_vars`: Which variables were renamed (old -&gt; new)
  - `recoded_vars`: Which variables had values recoded</p>
    </div>
    <div class="section level2">
    <h2 id="for-novice-researchers">For Novice Researchers<a class="anchor" aria-label="anchor" href="#for-novice-researchers"></a></h2>



<p>**Confused about what to put in each parameter?** Here's the easiest approach:</p>
<p>1. **First, look at your column names:**
   “`r
   names(raw_data)  # Shows all column names
   “`</p>
<p>2. **Start simple - just exclude incomplete responses:**
   “`r
   result &lt;- clean_survey_data(
     data = raw_data,
     inclusion_criteria = list(
       completed = raw_data$Finished == 1  # Qualtrics completion column
     )
   )
   “`</p>
<p>3. **Add attention checks (if you have them):**
   “`r
   # First, figure out which columns are your attention checks
   names(raw_data)  # Look for your attention check question numbers</p>
<p>result &lt;- clean_survey_data(
     data = raw_data,
     inclusion_criteria = list(
       completed = raw_data$Finished == 1
     ),
     attention_checks = list(
       # Replace Q5 with your actual question number
       ac1 = list(var = "Q5", correct = 7)  # Whatever answer was correct
     )
   )
   “`</p>
<p>4. **Add more criteria as needed:**
   “`r
   result &lt;- clean_survey_data(
     data = raw_data,
     inclusion_criteria = list(
       completed = raw_data$Finished == 1,
       adult = raw_data$age &gt;= 18,
       consented = raw_data$consent == "I agree"
     ),
     attention_checks = list(
       ac1 = list(var = "Q5", correct = 7),
       ac2 = list(var = "Q12", correct = "agree")
     ),
     id_var = "ResponseId"
   )
   “`</p>
<p>**Still confused?** Common issues:
- **Don't know column names?** Run: `names(raw_data)` or `colnames(raw_data)`
- **Don't know what values mean completion?** Run: `table(raw_data$Finished)`
- **Don't have attention checks?** Just leave out the `attention_checks` parameter
- **Don't have pre-tests?** Leave out `pretest_var` (it's NULL by default)
- **Want to remove pre-tests by date instead?** Use `date_var` + `pretest_before_date`
  (e.g., if you started real data collection on March 1, exclude anything before that date)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># ========================================================================</span></span></span>
<span class="r-in"><span><span class="co"># EXAMPLE 1: Minimal - Just exclude incomplete responses</span></span></span>
<span class="r-in"><span><span class="co"># ========================================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">clean_survey_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">raw_data</span>,</span></span>
<span class="r-in"><span>  inclusion_criteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    completed <span class="op">=</span> <span class="va">raw_data</span><span class="op">$</span><span class="va">Finished</span> <span class="op">==</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ========================================================================</span></span></span>
<span class="r-in"><span><span class="co"># EXAMPLE 2: Typical Qualtrics study with attention checks</span></span></span>
<span class="r-in"><span><span class="co"># ========================================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">clean_survey_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">raw_data</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Qualtrics marks preview responses in the Status column</span></span></span>
<span class="r-in"><span>  pretest_var <span class="op">=</span> <span class="st">"Status"</span>,</span></span>
<span class="r-in"><span>  pretest_values <span class="op">=</span> <span class="st">"Survey Preview"</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Requirements to be included</span></span></span>
<span class="r-in"><span>  inclusion_criteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    completed <span class="op">=</span> <span class="va">raw_data</span><span class="op">$</span><span class="va">Finished</span> <span class="op">==</span> <span class="fl">1</span>,        <span class="co"># Completed survey</span></span></span>
<span class="r-in"><span>    adult <span class="op">=</span> <span class="va">raw_data</span><span class="op">$</span><span class="va">age</span> <span class="op">&gt;=</span> <span class="fl">18</span>,                 <span class="co"># 18 or older</span></span></span>
<span class="r-in"><span>    consented <span class="op">=</span> <span class="va">raw_data</span><span class="op">$</span><span class="va">consent</span> <span class="op">==</span> <span class="st">"I agree"</span>   <span class="co"># Gave consent</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Attention checks (replace Q5, Q12 with your question numbers)</span></span></span>
<span class="r-in"><span>  attention_checks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    ac1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>var <span class="op">=</span> <span class="st">"Q5"</span>, correct <span class="op">=</span> <span class="fl">7</span><span class="op">)</span>,       <span class="co"># Told them to select 7</span></span></span>
<span class="r-in"><span>    ac2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>var <span class="op">=</span> <span class="st">"Q12"</span>, correct <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>       <span class="co"># Told them to select 1</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  attention_check_rule <span class="op">=</span> <span class="st">"all"</span>,  <span class="co"># Must pass both</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  id_var <span class="op">=</span> <span class="st">"ResponseId"</span>  <span class="co"># Qualtrics ID column</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ========================================================================</span></span></span>
<span class="r-in"><span><span class="co"># EXAMPLE 2B: Date-based pre-test removal</span></span></span>
<span class="r-in"><span><span class="co"># ========================================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If you ran pre-tests in February and started real data collection March 1</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">clean_survey_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">raw_data</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Remove anything collected before March 1, 2024</span></span></span>
<span class="r-in"><span>  date_var <span class="op">=</span> <span class="st">"StartDate"</span>,                       <span class="co"># Qualtrics start date column</span></span></span>
<span class="r-in"><span>  pretest_before_date <span class="op">=</span> <span class="st">"2024-03-01"</span>,           <span class="co"># Cutoff date</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Rest of your criteria</span></span></span>
<span class="r-in"><span>  inclusion_criteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    completed <span class="op">=</span> <span class="va">raw_data</span><span class="op">$</span><span class="va">Finished</span> <span class="op">==</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>    adult <span class="op">=</span> <span class="va">raw_data</span><span class="op">$</span><span class="va">age</span> <span class="op">&gt;=</span> <span class="fl">18</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  attention_checks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    ac1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>var <span class="op">=</span> <span class="st">"Q5"</span>, correct <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  id_var <span class="op">=</span> <span class="st">"ResponseId"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ========================================================================</span></span></span>
<span class="r-in"><span><span class="co"># EXAMPLE 2C: Combine column-based AND date-based pre-test removal</span></span></span>
<span class="r-in"><span><span class="co"># ========================================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove BOTH "Survey Preview" responses AND anything before March 1</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">clean_survey_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">raw_data</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Column-based: Qualtrics preview responses</span></span></span>
<span class="r-in"><span>  pretest_var <span class="op">=</span> <span class="st">"Status"</span>,</span></span>
<span class="r-in"><span>  pretest_values <span class="op">=</span> <span class="st">"Survey Preview"</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Date-based: Anything before March 1</span></span></span>
<span class="r-in"><span>  date_var <span class="op">=</span> <span class="st">"StartDate"</span>,</span></span>
<span class="r-in"><span>  pretest_before_date <span class="op">=</span> <span class="st">"2024-03-01"</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Other criteria...</span></span></span>
<span class="r-in"><span>  inclusion_criteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    completed <span class="op">=</span> <span class="va">raw_data</span><span class="op">$</span><span class="va">Finished</span> <span class="op">==</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  id_var <span class="op">=</span> <span class="st">"ResponseId"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get your cleaned data</span></span></span>
<span class="r-in"><span><span class="va">clean_df</span> <span class="op">&lt;-</span> <span class="va">result</span><span class="op">$</span><span class="va">clean_data</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Copy this into your Methods section</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">publication_text</span><span class="op">$</span><span class="va">concise</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ========================================================================</span></span></span>
<span class="r-in"><span><span class="co"># EXAMPLE 3: MTurk study</span></span></span>
<span class="r-in"><span><span class="co"># ========================================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">clean_survey_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">raw_data</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Mark your own test responses</span></span></span>
<span class="r-in"><span>  pretest_var <span class="op">=</span> <span class="st">"WorkerId"</span>,</span></span>
<span class="r-in"><span>  pretest_values <span class="op">=</span> <span class="st">"YOUR_WORKER_ID_HERE"</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># MTurk quality criteria</span></span></span>
<span class="r-in"><span>  inclusion_criteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    submitted <span class="op">=</span> <span class="va">raw_data</span><span class="op">$</span><span class="va">AssignmentStatus</span> <span class="op">==</span> <span class="st">"Submitted"</span>,</span></span>
<span class="r-in"><span>    approval <span class="op">=</span> <span class="va">raw_data</span><span class="op">$</span><span class="va">ApprovalRate</span> <span class="op">&gt;=</span> <span class="fl">95</span>,</span></span>
<span class="r-in"><span>    min_hits <span class="op">=</span> <span class="va">raw_data</span><span class="op">$</span><span class="va">TotalHITS</span> <span class="op">&gt;=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>    us_location <span class="op">=</span> <span class="va">raw_data</span><span class="op">$</span><span class="va">CountryOfResidence</span> <span class="op">==</span> <span class="st">"US"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Your attention checks</span></span></span>
<span class="r-in"><span>  attention_checks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    ac1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>var <span class="op">=</span> <span class="st">"attention_1"</span>, correct <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    ac2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>var <span class="op">=</span> <span class="st">"attention_2"</span>, correct <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Also exclude duplicates and speeders</span></span></span>
<span class="r-in"><span>  additional_exclusions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="va">raw_data</span><span class="op">$</span><span class="va">WorkerId</span><span class="op">)</span> <span class="op">|</span></span></span>
<span class="r-in"><span>                         <span class="va">raw_data</span><span class="op">$</span><span class="va">duration_sec</span> <span class="op">&lt;</span> <span class="fl">120</span>,</span></span>
<span class="r-in"><span>  additional_exclusion_reason <span class="op">=</span> <span class="st">"Duplicate worker IDs or completed too quickly"</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  id_var <span class="op">=</span> <span class="st">"WorkerId"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ========================================================================</span></span></span>
<span class="r-in"><span><span class="co"># EXAMPLE 4: No attention checks, just basic cleaning</span></span></span>
<span class="r-in"><span><span class="co"># ========================================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">clean_survey_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">raw_data</span>,</span></span>
<span class="r-in"><span>  inclusion_criteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    completed <span class="op">=</span> <span class="va">raw_data</span><span class="op">$</span><span class="va">Finished</span> <span class="op">==</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>    consented <span class="op">=</span> <span class="va">raw_data</span><span class="op">$</span><span class="va">consent_given</span> <span class="op">==</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># That's it! No attention checks needed.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ========================================================================</span></span></span>
<span class="r-in"><span><span class="co"># EXAMPLE 5: Rename variables and recode values (VERY USEFUL!)</span></span></span>
<span class="r-in"><span><span class="co"># ========================================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># First, check what Qualtrics named your columns</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">raw_data</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># [1] "ResponseId" "Q1" "Q2" "Q3" "Q17" "FL_16_DO" "Finished" ...</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">clean_survey_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">raw_data</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Rename Qualtrics' random names to meaningful names</span></span></span>
<span class="r-in"><span>  rename_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    brand_attitude <span class="op">=</span> <span class="st">"Q1"</span>,          <span class="co"># Q1 -&gt; brand_attitude</span></span></span>
<span class="r-in"><span>    purchase_intent <span class="op">=</span> <span class="st">"Q2"</span>,         <span class="co"># Q2 -&gt; purchase_intent</span></span></span>
<span class="r-in"><span>    satisfaction <span class="op">=</span> <span class="st">"Q3"</span>,            <span class="co"># Q3 -&gt; satisfaction</span></span></span>
<span class="r-in"><span>    age <span class="op">=</span> <span class="st">"Q17"</span>,                    <span class="co"># Q17 -&gt; age</span></span></span>
<span class="r-in"><span>    condition <span class="op">=</span> <span class="st">"FL_16_DO"</span>          <span class="co"># Flow field -&gt; condition</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Recode numeric codes to meaningful labels</span></span></span>
<span class="r-in"><span>  <span class="co"># IMPORTANT: Use the NEW names (after renaming)</span></span></span>
<span class="r-in"><span>  recode_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    condition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span> <span class="op">=</span> <span class="st">"control"</span>, <span class="st">"2"</span> <span class="op">=</span> <span class="st">"treatment_A"</span>, <span class="st">"3"</span> <span class="op">=</span> <span class="st">"treatment_B"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span> <span class="op">=</span> <span class="st">"18-24"</span>, <span class="st">"2"</span> <span class="op">=</span> <span class="st">"25-34"</span>, <span class="st">"3"</span> <span class="op">=</span> <span class="st">"35-44"</span>, <span class="st">"4"</span> <span class="op">=</span> <span class="st">"45-54"</span>, <span class="st">"5"</span> <span class="op">=</span> <span class="st">"55+"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Now use the NEW names in your inclusion criteria</span></span></span>
<span class="r-in"><span>  inclusion_criteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    completed <span class="op">=</span> <span class="va">raw_data</span><span class="op">$</span><span class="va">Finished</span> <span class="op">==</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  id_var <span class="op">=</span> <span class="st">"ResponseId"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Your clean data now has meaningful variable names and labels!</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">clean_data</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># [1] "ResponseId" "brand_attitude" "purchase_intent" "satisfaction" "age" "condition" ...</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">clean_data</span><span class="op">$</span><span class="va">condition</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># control  treatment_A  treatment_B</span></span></span>
<span class="r-in"><span><span class="co">#     150          145          143</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Josh Gonzales.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

