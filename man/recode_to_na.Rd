% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/labelled_data.R
\name{recode_to_na}
\alias{recode_to_na}
\title{Recode Problematic Values to NA with Detailed Logging}
\usage{
recode_to_na(x, values_to_na, variable_name = "variable")
}
\arguments{
\item{x}{Vector to recode (numeric, haven_labelled, or factor)}

\item{values_to_na}{Numeric vector of values to convert to NA}

\item{variable_name}{Character string, name of the variable (for logging)}
}
\value{
List containing:
  \itemize{
    \item \code{recoded}: The recoded vector
    \item \code{log}: Data frame with columns:
      \itemize{
        \item \code{variable}: Variable name
        \item \code{value_recoded}: The value that was recoded
        \item \code{n_affected}: Number of cases changed
        \item \code{percent_affected}: Percentage of non-missing cases affected
      }
  }
}
\description{
**L1 Internal Helper.** Replaces problematic response codes (e.g., 99 = "Don't know")
with NA, and creates a detailed log of what was changed.
}
\details{
**What this does:**
Systematically replaces specific values with NA and tracks the changes.
This is critical for transparency and reproducibility.

**For peer review:**
The log provides exact counts of how many responses were excluded and why,
which reviewers expect to see in your Methods section.
}
\examples{
\dontrun{
# Recode 99 (Don't know) and -1 (Not applicable) to NA
result <- recode_to_na(
  data$satisfaction,
  values_to_na = c(99, -1),
  variable_name = "satisfaction"
)

# Use the recoded variable
data$satisfaction_clean <- result$recoded

# Check what was changed
result$log
#   variable     value_recoded n_affected percent_affected
#   satisfaction 99            12         3.2\%
#   satisfaction -1            5          1.3\%
}

}
\keyword{internal}
