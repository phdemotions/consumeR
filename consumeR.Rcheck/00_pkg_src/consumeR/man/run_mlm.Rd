% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mlm.R
\name{run_mlm}
\alias{run_mlm}
\title{Multi-Level Modeling (MLM/HLM)}
\usage{
run_mlm(formula, data, REML = TRUE, control = NULL, ...)
}
\arguments{
\item{formula}{Model formula in lme4 syntax. Use \code{(1 | group)} for
random intercept, \code{(predictor | group)} for random intercept and
slope. See \code{lme4::lmer} for full syntax.}

\item{data}{Data frame containing all variables in the formula.}

\item{REML}{Logical. Use REML (restricted maximum likelihood) estimation?
Default is TRUE. Use FALSE for ML when comparing models with different
fixed effects.}

\item{control}{Optional list of control parameters. See
\code{lme4::lmerControl} for options.}

\item{...}{Additional arguments passed to \code{lme4::lmer}.}
}
\value{
Object of class \code{mlm_result} (extends lmerMod) with additional
  elements:
  \describe{
    \item{fixed_effects}{Tibble of fixed effect estimates with CIs}
    \item{random_effects}{Tibble of random effect variances and SDs}
    \item{icc}{Intraclass correlation coefficient(s)}
    \item{model_fit}{Model fit statistics (AIC, BIC, log-likelihood)}
    \item{n_groups}{Number of groups per grouping factor}
    \item{n_obs}{Total number of observations}
    \item{interpretation}{Publication-ready interpretation text}
    \item{lmer_fit}{Original lmer fit object}
  }
}
\description{
Fit multilevel (hierarchical linear) models for nested data structures using
lme4. Handles random intercepts, random slopes, and crossed random effects.
Provides publication-ready output for consumer psychology research.
}
\details{
This function provides a simplified interface to lme4::lmer() with output
formatted for publication in consumer psychology journals. It automatically:
\itemize{
  \item Calculates intraclass correlation (ICC)
  \item Extracts fixed and random effects
  \item Computes confidence intervals
  \item Formats results for publication
  \item Generates interpretation text
}

**Random Effects Syntax**:
\itemize{
  \item Random intercept: \code{(1 | group)}
  \item Random slope: \code{(x | group)} (includes random intercept)
  \item Uncorrelated: \code{(x || group)} (no correlation between intercept and slope)
  \item Crossed effects: \code{(1 | group1) + (1 | group2)}
  \item Nested effects: \code{(1 | group1/group2)} or \code{(1 | group1:group2)}
}

**Intraclass Correlation (ICC)**:
Proportion of total variance due to grouping. Indicates necessity of MLM:
\itemize{
  \item ICC < 0.05: Little clustering, OLS may suffice
  \item ICC 0.05-0.10: Moderate clustering, MLM recommended
  \item ICC > 0.10: Substantial clustering, MLM required
}

**Model Comparison**:
\itemize{
  \item Use REML = TRUE for final models (default)
  \item Use REML = FALSE when comparing models with different fixed effects
  \item Compare nested models with anova()
  \item Use AIC/BIC for non-nested models
}
}
\examples{
\dontrun{
# Random intercept model: Satisfaction nested within stores
model1 <- run_mlm(
  satisfaction ~ price + quality + (1 | store_id),
  data = consumer_data
)
print(model1)

# Random slope model: Price effect varies by store
model2 <- run_mlm(
  satisfaction ~ price + quality + (price | store_id),
  data = consumer_data
)

# Crossed random effects: Consumers and products
model3 <- run_mlm(
  rating ~ brand + price + (1 | consumer_id) + (1 | product_id),
  data = rating_data
)

# Extract results
tidy_mlm(model1)
}

}
\references{
Bates, D., Machler, M., Bolker, B., & Walker, S. (2015). Fitting linear
  mixed-effects models using lme4. Journal of Statistical Software, 67(1),
  1-48.

Snijders, T. A. B., & Bosker, R. J. (2012). Multilevel analysis: An
  introduction to basic and advanced multilevel modeling (2nd ed.). Sage.
}
