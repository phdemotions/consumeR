% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sem.R
\name{run_sem}
\alias{run_sem}
\title{Structural Equation Modeling (SEM) Path Analysis}
\usage{
run_sem(
  model,
  data,
  estimator = "ML",
  se = c("standard", "bootstrap", "robust"),
  bootstrap = 5000,
  missing = c("listwise", "fiml"),
  std_estimates = TRUE,
  fit_measures = c("chisq", "df", "pvalue", "cfi", "tli", "rmsea", "rmsea.ci.lower",
    "rmsea.ci.upper", "srmr"),
  seed = NULL,
  ...
)
}
\arguments{
\item{model}{Lavaan model syntax (character string) or list of equations.
See \code{lavaan::model.syntax} for details. Can use simplified syntax:
\code{c("y ~ x + m", "m ~ x")} or full lavaan syntax with latent variables.}

\item{data}{Data frame containing all variables in the model.}

\item{estimator}{Estimator to use. Default is "ML" (maximum likelihood).
Options: "ML", "MLM" (robust), "MLR" (robust), "ULS", "DWLS", "WLS".}

\item{se}{Standard error method. Default is "standard". Use "bootstrap" for
bootstrap standard errors (recommended for indirect effects).}

\item{bootstrap}{Number of bootstrap samples if \code{se = "bootstrap"}.
Minimum 1000, 5000+ recommended for publication.}

\item{missing}{How to handle missing data. Default is "listwise" (complete
cases). Use "fiml" for full information maximum likelihood (only with ML
estimator).}

\item{std_estimates}{Logical. If TRUE (default), returns standardized
estimates in addition to unstandardized.}

\item{fit_measures}{Character vector of fit indices to include. Default is
c("chisq", "df", "pvalue", "cfi", "tli", "rmsea", "srmr"). See
\code{lavaan::fitMeasures} for all available options.}

\item{seed}{Random seed for reproducibility (used with bootstrap).}

\item{...}{Additional arguments passed to \code{lavaan::sem()}.}
}
\value{
Object of class \code{sem_result} (extends lavaan object) with
  additional elements:
  \describe{
    \item{params}{Tibble of parameter estimates with CIs}
    \item{fit}{Tibble of model fit indices}
    \item{r2}{Tibble of R² for endogenous variables}
    \item{indirect_effects}{Tibble of indirect effects (if present)}
    \item{model_syntax}{Original model specification}
    \item{interpretation}{Publication-ready interpretation text}
    \item{lavaan_fit}{Original lavaan fit object}
  }
}
\description{
Fit structural equation models with latent and observed variables using
lavaan. Provides publication-ready output for path analysis, mediation
models, and confirmatory factor analysis with multiple outcomes.
}
\details{
This function provides a simplified interface to lavaan::sem() with sensible
defaults for consumer psychology research. It automatically:
\itemize{
  \item Validates model syntax and data
  \item Calculates standardized and unstandardized estimates
  \item Extracts fit indices following JCP 2026 guidelines
  \item Identifies and extracts indirect effects
  \item Generates publication-ready interpretation
  \item Handles bootstrap CIs for indirect effects
}

**Model Syntax**:
\itemize{
  \item Regression: \code{y ~ x + z}
  \item Latent variable: \code{latent =~ indicator1 + indicator2}
  \item Covariance: \code{x ~~ y}
  \item Indirect effect (labeled): \code{y ~ b*m; m ~ a*x; ab := a*b}
}

**Fit Index Guidelines (Hu & Bentler, 1999)**:
\itemize{
  \item CFI ≥ 0.95 (good), ≥ 0.90 (acceptable)
  \item TLI ≥ 0.95 (good), ≥ 0.90 (acceptable)
  \item RMSEA ≤ 0.06 (good), ≤ 0.08 (acceptable)
  \item SRMR ≤ 0.08 (good), ≤ 0.10 (acceptable)
}
}
\examples{
\dontrun{
# Simple mediation model
model <- "
  # Direct effects
  satisfaction ~ b*quality + c*price
  quality ~ a*brand_reputation

  # Indirect effect
  indirect := a * b
"

result <- run_sem(model, data = consumer_survey, se = "bootstrap",
                  bootstrap = 5000, seed = 123)
print(result)

# Path model with multiple outcomes
model2 <- c(
  "purchase_intent ~ attitude + subjective_norm",
  "attitude ~ ad_exposure + prior_belief",
  "subjective_norm ~ ad_exposure"
)

result2 <- run_sem(model2, data = mydata)
tidy_sem(result2)
}

}
\references{
Rosseel, Y. (2012). lavaan: An R package for structural equation modeling.
  Journal of Statistical Software, 48(2), 1-36.

Hu, L., & Bentler, P. M. (1999). Cutoff criteria for fit indexes in
  covariance structure analysis. Structural Equation Modeling, 6(1), 1-55.
}
